server:
  port: ${PORT:8080}  # Railway가 PORT 환경변수로 포트를 지정함

spring:
  application:
    name: groupbuy
  profiles:
    default: prod

  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://${MYSQLHOST:${DB_HOST}}:${MYSQLPORT:${DB_PORT:3306}}/${MYSQLDATABASE:${DB_NAME}}?useSSL=false&allowPublicKeyRetrieval=true&characterEncoding=utf8&serverTimezone=Asia/Seoul
    username: ${MYSQLUSER:${DB_USERNAME}}
    password: ${MYSQLPASSWORD:${DB_PASSWORD}}

  jpa:
    hibernate:
      ddl-auto: update         # 초반엔 update, 운영 안정화 후 validate 권장
    open-in-view: false
    show-sql: false
    properties:
      hibernate:
        format_sql: true
        dialect: org.hibernate.dialect.MySQL8Dialect

  jackson:
    time-zone: Asia/Seoul
    serialization:
      WRITE_DATES_AS_TIMESTAMPS: false

  servlet:
    multipart:
      max-file-size: 10MB
      max-request-size: 20MB

management:
  endpoints:
    web:
      exposure:
        include: health,info

logging:
  level:
    root: INFO
    org.hibernate.SQL: WARN
    org.hibernate.type.descriptor.sql.BasicBinder: WARN

# 앱 커스텀 설정 (필요시)
app:
  cors:
    allowed-origins: ${CORS_ALLOWED_ORIGINS:*}   # 예: https://your-frontend.app
  security:
    x-user:
      enabled: true
  jwt:
    secret: ${JWT_SECRET}                # 매우 긴 문자열(32바이트 이상)
    expiration: ${JWT_EXP:3600000}   # <- JWT_EXP 환경변수 그대로 매핑
